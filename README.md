# 25年电赛C题

## MAIXCAM方案
由于赛题给出了目标物的特征，A4有2cm宽，可获得目标物的真实物理尺寸，测距我们可以通过边框的像素点来实现，这里我采用内边框来实现，刚开始我使用的是外边框，为避免环境干扰改为采取内边框像素点，具体可看代码。
<b>1.</b> 使用OpenCV将图像进行预处理，加入<b>图形学闭运算</b>（先膨胀后腐蚀），对闭运算后的灰度图像进行<b>Canny算子边缘提取</b>

<b>2.</b> 使用OpenCV对边缘图像进行轮廓提取，对轮廓先后进行<b>面积筛选</b>（筛选出轮廓面积在SQUARE_MIN-SQUARE_MAX之间的轮廓）、<b>轮廓中心坐标筛选</b>（筛选出轮廓中心在以图像中心为圆心、CIRCLE_ROI_RADIUS为半径的圆ROI内的轮廓）、<b>轮廓面积非极大值抑制</b>

<b>3.</b> 对通过上述步骤进行筛选出来的轮廓进行<b>多边形逼近</b>，提取出内矩形外框，即找到内矩形底边，代码中的K值需要大家根据自己的摄像头调整。
## 基础部分方案
基础部分没什么好说的大家可自行看代码，注意自行调整代码滤除干扰即可。
## 发挥部分方案
## 重叠矩形方案
思路就是先轮廓检测 然后把所有的焦点都记录下来 然后根据这个点两边判断它是否是直角 然后同时也要判断它是否是凹点还是凸点  如果相邻的两个凸点，并且它还是直角点， 说明他中间的这条线就是我们的正方形的边，这是思路，因为图像距离较远时在摄像头内图像较小，我第一步将矩形框识别出来后将此框作为ROI，即只在矩形框内识别，具体看代码。
## 识别数字方案
采用yolo方案，仅仅yolo无法完成这项任务，我们在实验室拍照标了一个晚上加训练的效果非常糟糕，那么只能在图像上进一步处理，于是我想到了上一步中的将矩形框识别出来后将此框作为ROI，然而效果还是很差大家可以再也此方法试试，最后我采用正方形识别+ROI，将图像中识别到的正方形作为ROI区域识别完成后跳转到下一个正方形，以下一个正方形作为新的ROI
## 倾斜方案
想必大家都想到了透视变换，这个方法在这题中比较难实现，由于时间紧张，最后我采用了不正规的像素点方法，在cv环境下即使倾斜也可以识别到矩形框和正方形，因为倾斜，矩形框左边和右边在摄像头中不一样长，我将识别到的矩形框的左侧和右侧取平均值和正方形左侧和右侧取平均值作比较就可以得出正方形实际尺寸。

